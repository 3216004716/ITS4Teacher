# 问题链可视化功能说明

## 功能概述
成功实现了基于时间轴的问题链可视化，将原有的桑基图改造为更直观的时间轴展示形式。

## 核心特性

### 1. 问题链分组算法
- **时间聚类**: 时间间隔小于30秒的连续问题归为一个问题链
- **话题连贯性**: 同一个话题(mat类型)的连续问题优先归为一链
- **认知递进**: 考虑布鲁姆层级的逻辑递进关系
- **智能断点**: 时间间隔>60秒或话题转换作为链的自然断点

### 2. 可视化设计

#### 布局结构
- **横轴**: 课堂时间进度 (0-2800秒，按分:秒格式显示)
- **纵轴**: 问题链垂直分布，自动避免重叠
- **问题节点**: 不同形状和大小表示布鲁姆认知层级
- **连接线**: 平滑曲线连接同一链内的问题

#### 颜色编码
- **是何问题**: 橙色 (#FFAA64)
- **如何问题**: 红色 (#FF6B6B)
- **为何问题**: 蓝色 (#45B7D1)
- **若何问题**: 黄色 (#FFBE0B)
- **其他问题**: 紫色 (#A882DD)

#### 节点形状
- **记忆层级**: 圆形 (6px)
- **理解层级**: 方形 (8px)
- **应用层级**: 菱形 (10px)
- **分析层级**: 三角形 (12px)
- **评价层级**: 星形 (14px)
- **创造层级**: 六边形 (16px)

### 3. 交互功能

#### 鼠标悬停
- 问题节点悬停显示详细信息
- 包含问题内容、学生回答、时间和情感分类
- 节点自动放大1.3倍并高亮

#### 点击交互
- **问题节点点击**: 选中所属问题链
- **问题链背景点击**: 显示问题链统计详情
- **自动高亮**: 选中的问题链突出显示，其他淡化

#### 详情展示
- 问题链包含问题数量、持续时长
- 认知递进模式分析 (递进/回退/稳定)
- 情感倾向统计
- 时间范围和主要认知层级

### 4. 动画效果
- **进场动画**: 问题链依次淡入，错开200ms
- **节点动画**: 问题节点从0逐渐扩展到目标大小
- **连接线动画**: 平滑的线条绘制效果
- **交互动画**: 悬停和选中时的平滑过渡

### 5. 数据处理结果
成功处理了69个问题，分组为19个问题链：

```
链 1: 2个问题, 17秒, 为何
链 2: 1个问题, 3秒, 如何
链 3: 5个问题, 102秒, 如何
链 4: 11个问题, 135秒, 是何
链 5: 2个问题, 11秒, 是何
[... 更多问题链]
```

## 文件结构

### 新增文件
- `src/utils/questionChainProcessor.js` - 问题链处理算法
- `src/data/question_chains.json` - 处理后的问题链数据
- `scripts/generateQuestionChains.js` - 数据生成脚本

### 修改文件
- `src/components/visualization/QuestionStringView.vue` - 主要可视化组件

## 使用方法

1. **数据更新**: 如需重新处理问题数据，运行数据生成脚本
2. **查看可视化**: 访问QuestionStringView组件查看问题链时间轴
3. **交互探索**: 通过鼠标悬停和点击探索具体问题详情
4. **分析洞察**: 观察问题链的时间分布、话题转换和认知递进模式

## 技术特点

- **响应式设计**: 支持不同屏幕尺寸
- **性能优化**: 使用D3.js高效渲染
- **数据驱动**: 基于JSON数据文件的可视化
- **模块化设计**: 清晰的代码结构和功能分离

这个问题链可视化为教师提供了直观的课堂提问分析工具，帮助理解教学节奏、话题转换规律和学生认知发展轨迹。