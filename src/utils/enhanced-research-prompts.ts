// å¢å¼ºç‰ˆæ•™ç ”æµç¨‹é…ç½®
// æ”¯æŒè‡ªä¸»æé—®å’ŒAIå¼•å¯¼ä¸¤ç§æ¨¡å¼

/**
 * æ•™å­¦ç­–ç•¥ç»´åº¦åˆ†ç±»
 */
export const TEACHING_STRATEGIES = {
  THINKING_STIMULATION: {
    name: 'æ€ç»´æ¿€å‘ç­–ç•¥',
    description: 'é€šè¿‡æé—®ã€ä»»åŠ¡ç­‰æ¿€å‘å­¦ç”Ÿæ€è€ƒã€æ¢ç©¶ã€åˆ›é€ çš„ç­–ç•¥',
    keywords: ['æé—®', 'è¿½é—®', 'å¯å‘', 'æ¢ç©¶', 'æ€ç»´', 'è®¤çŸ¥å†²çª', 'æ·±åº¦æ€è€ƒ']
  },
  INSTRUCTION_INTERACTION: {
    name: 'æˆå¯¼äº’åŠ¨ç­–ç•¥',
    description: 'è®²æˆçŸ¥è¯†ã€å¼•å¯¼å­¦ä¹ ã€ç»„ç»‡äº’åŠ¨çš„ç­–ç•¥',
    keywords: ['è®²è§£', 'ç¤ºèŒƒ', 'å¼•å¯¼', 'å¯¹è¯', 'äº’åŠ¨', 'å°ç»„', 'è®¨è®º']
  },
  EVALUATION_FEEDBACK: {
    name: 'è¯„ä»·åé¦ˆç­–ç•¥',
    description: 'è¯„ä»·å­¦ç”Ÿè¡¨ç°ã€æä¾›åé¦ˆã€è°ƒæ•´æ•™å­¦çš„ç­–ç•¥',
    keywords: ['è¯„ä»·', 'åé¦ˆ', 'é¼“åŠ±', 'çº é”™', 'è¯Šæ–­', 'è°ƒæ•´']
  }
};

/**
 * å®è·µæ€§çŸ¥è¯†ç»´åº¦åˆ†ç±»
 */
export const PRACTICAL_KNOWLEDGE = {
  DECLARATIVE: {
    name: 'é™ˆè¿°æ€§çŸ¥è¯†',
    description: 'å…³äº"æ˜¯ä»€ä¹ˆ"çš„çŸ¥è¯†ï¼šæ¦‚å¿µã€ç†è®ºã€åŸåˆ™ç­‰',
    keywords: ['æ¦‚å¿µ', 'å®šä¹‰', 'ç†è®º', 'åŸåˆ™', 'æ˜¯ä»€ä¹ˆ', 'åˆ†ç±»']
  },
  PROCEDURAL: {
    name: 'ç¨‹åºæ€§çŸ¥è¯†',
    description: 'å…³äº"æ€ä¹ˆåš"çš„çŸ¥è¯†ï¼šå…·ä½“æ“ä½œæ­¥éª¤ã€æŠ€å·§æ–¹æ³•',
    keywords: ['æ­¥éª¤', 'æ–¹æ³•', 'æŠ€å·§', 'æ“ä½œ', 'æ€ä¹ˆåš', 'æµç¨‹']
  },
  EXPLANATORY: {
    name: 'è§£é‡Šæ€§çŸ¥è¯†',
    description: 'å…³äº"ä¸ºä»€ä¹ˆ"çš„çŸ¥è¯†ï¼šåŸç†ã€æœºåˆ¶ã€ç†ç”±',
    keywords: ['ä¸ºä»€ä¹ˆ', 'åŸå› ', 'åŸç†', 'æœºåˆ¶', 'ä¾æ®', 'ç†ç”±']
  },
  CONDITIONAL: {
    name: 'æ¡ä»¶æ€§çŸ¥è¯†',
    description: 'å…³äº"ä½•æ—¶ä½•åœ°"çš„çŸ¥è¯†ï¼šé€‚ç”¨æƒ…å¢ƒã€æ¡ä»¶åˆ¤æ–­',
    keywords: ['ä½•æ—¶', 'ä½•åœ°', 'æƒ…å¢ƒ', 'æ¡ä»¶', 'é€‚ç”¨', 'åˆ¤æ–­']
  },
  METACOGNITIVE: {
    name: 'å…ƒè®¤çŸ¥çŸ¥è¯†',
    description: 'å…³äºè‡ªæˆ‘è®¤çŸ¥çš„çŸ¥è¯†ï¼šåæ€ã€ç›‘æ§ã€è°ƒèŠ‚',
    keywords: ['åæ€', 'è‡ªæˆ‘', 'ç›‘æ§', 'è°ƒèŠ‚', 'æ„è¯†', 'è®¤çŸ¥']
  }
};

/**
 * è¯¾å ‚æ•ˆèƒ½ç±»å‹åˆ†æ
 */
export const CLASSROOM_EFFICIENCY_TYPES = {
  GENERATIVE_HIGH_LEARNING: {
    type: 'ç”Ÿæˆå‹è¯¾å ‚',
    label: 'é«˜æ•ˆå­¦',
    description: 'å­¦ç”Ÿæ·±åº¦å‚ä¸ã€ä¸»åŠ¨å»ºæ„çŸ¥è¯†ã€é«˜é˜¶æ€ç»´æ´»è·ƒ',
    characteristics: [
      'å­¦ç”Ÿæé—®å¤šã€æ€è€ƒæ·±',
      'å¸ˆç”Ÿ/ç”Ÿç”Ÿäº’åŠ¨è´¨é‡é«˜',
      'å­¦ç”Ÿä½œå“æœ‰åˆ›é€ æ€§',
      'å­¦ä¹ ç›®æ ‡è¾¾æˆåº¦é«˜'
    ],
    color: '#52C41A'
  },
  TRANSMISSIVE_HIGH_TEACHING: {
    type: 'ä¼ æˆå‹è¯¾å ‚',
    label: 'é«˜æ•ˆæ•™',
    description: 'æ•™å¸ˆè®²æˆæ¸…æ™°ã€çŸ¥è¯†ä¼ é€’æœ‰æ•ˆã€å­¦ç”Ÿæ¥å—è‰¯å¥½',
    characteristics: [
      'æ•™å¸ˆè®²è§£æ¸…æ™°å‡†ç¡®',
      'çŸ¥è¯†ç‚¹è¦†ç›–å…¨é¢',
      'å­¦ç”Ÿå¬è®²ä¸“æ³¨',
      'åŸºç¡€çŸ¥è¯†æŒæ¡æ‰å®'
    ],
    color: '#1890FF'
  },
  UNFOCUSED_LOW_LEARNING: {
    type: 'å¤±ç„¦å‹è¯¾å ‚',
    label: 'ä½æ•ˆå­¦',
    description: 'å­¦ç”Ÿå‚ä¸åº¦ä½ã€æ³¨æ„åŠ›åˆ†æ•£ã€å­¦ä¹ æ•ˆæœä¸ä½³',
    characteristics: [
      'å­¦ç”Ÿèµ°ç¥ã€è¢«åŠ¨åº”ä»˜',
      'ä»»åŠ¡ä¸ç›®æ ‡è„±èŠ‚',
      'äº’åŠ¨æµäºå½¢å¼',
      'å­¦ä¹ ç›®æ ‡æœªè¾¾æˆ'
    ],
    color: '#FAAD14'
  },
  CRAMMING_LOW_TEACHING: {
    type: 'æ»¡çŒå‹è¯¾å ‚',
    label: 'ä½æ•ˆæ•™',
    description: 'æ•™å¸ˆæ»¡å ‚çŒã€å­¦ç”Ÿè¢«åŠ¨æ¥å—ã€è®¤çŸ¥è´Ÿè·è¿‡é‡',
    characteristics: [
      'æ•™å¸ˆè®²è§£è¿‡å¤šè¿‡å¿«',
      'å­¦ç”Ÿç¼ºä¹æ€è€ƒæ—¶é—´',
      'äº’åŠ¨æœºä¼šå°‘',
      'çŸ¥è¯†æœºæ¢°è®°å¿†'
    ],
    color: '#F5222D'
  }
};

/**
 * å¼€åœºç™½æç¤ºè¯
 */
export const WELCOME_PROMPT = `ä½ æ˜¯"é—®è¯¾"æ™ºèƒ½æ•™ç ”åŠ©æ‰‹ï¼Œä¸€ä½ç»éªŒä¸°å¯Œçš„è¯¾å ‚åˆ†æä¸“å®¶ã€‚

**å¼€åœºç™½è¦æ±‚ï¼š**
è¯·ç”¨æ¸©æš–ã€ä¸“ä¸šçš„è¯­æ°”è¯´ä¸€å¥å¼€åœºæ¬¢è¿è¯­ï¼Œç„¶åå‘æ•™å¸ˆæä¾›ä¸¤ä¸ªé€‰æ‹©ï¼š

Aï¼‰æˆ‘æƒ³ç›´æ¥æå‡ºè‡ªå·±çš„æ•™ç ”é—®é¢˜
Bï¼‰å¸Œæœ›ä½ å¼•å¯¼æˆ‘å‘ç°è¯¾å ‚ä¸­çš„æ”¹è¿›ç‚¹

**å›å¤æ ¼å¼ï¼š**
[å¼€åœºæ¬¢è¿è¯­]

ğŸ’¡ æ¥ä¸‹æ¥ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ï¼š

**Aï¼‰è‡ªä¸»æ¢ç©¶** - å¦‚æœæ‚¨å·²ç»æœ‰æ˜ç¡®çš„å›°æƒ‘æˆ–æƒ³æ”¹è¿›çš„æ–¹é¢ï¼Œè¯·ç›´æ¥å‘æˆ‘æé—®ï¼Œæˆ‘ä¼šå¸®æ‚¨å®šä½æ•™ç ”ç›®æ ‡å¹¶æ·±å…¥åˆ†æã€‚

**Bï¼‰æ™ºèƒ½å¼•å¯¼** - å¦‚æœæ‚¨å¸Œæœ›æˆ‘åŸºäºè¯¾å ‚æ•°æ®å¸®æ‚¨å‘ç°æ½œåœ¨çš„æ”¹è¿›ç‚¹ï¼Œæˆ‘ä¼šå¼•å¯¼æ‚¨è¿›è¡Œç³»ç»Ÿæ€§çš„è¯¾å ‚è¯Šæ–­ã€‚

è¯·å‘Šè¯‰æˆ‘æ‚¨çš„é€‰æ‹©ï¼Œæˆ–è€…ç›´æ¥å¼€å§‹æé—® ğŸ˜Š

**è¯­è¨€é£æ ¼ï¼š**
- æ¸©æš–äº²åˆ‡ï¼Œä¸è¦è¿‡äºæ­£å¼
- ä½“ç°ä¸“ä¸šæ€§ä½†æ˜“æ‡‚
- å­—æ•°æ§åˆ¶åœ¨150å­—ä»¥å†…
- ç”¨emojié€‚å½“ç‚¹ç¼€`;

/**
 * è‡ªä¸»æé—®æ¨¡å¼ - ç›®æ ‡å®šä½æç¤ºè¯
 */
export const SELF_INQUIRY_GOAL_PROMPT = `ä½ æ˜¯æ•™ç ”ç›®æ ‡å®šä½ä¸“å®¶ï¼Œéœ€è¦å¸®åŠ©æ•™å¸ˆä»ä¸¤ä¸ªç»´åº¦æ˜ç¡®æ•™ç ”ç›®æ ‡ã€‚

**æ•™å¸ˆçš„é—®é¢˜ï¼š**
{{userQuestion}}

**ä½ çš„ä»»åŠ¡ï¼š**
1. åˆ†ææ•™å¸ˆé—®é¢˜çš„æ ¸å¿ƒå…³æ³¨ç‚¹
2. ä»ä¸¤ä¸ªç»´åº¦è¿›è¡Œå½’ç±»å®šä½ï¼š

**ç»´åº¦ä¸€ï¼šæ•™å­¦ç­–ç•¥**
- æ€ç»´æ¿€å‘ç­–ç•¥ï¼šæ¿€å‘å­¦ç”Ÿæ€è€ƒã€æ¢ç©¶ã€åˆ›é€ 
- æˆå¯¼äº’åŠ¨ç­–ç•¥ï¼šè®²æˆçŸ¥è¯†ã€å¼•å¯¼å­¦ä¹ ã€ç»„ç»‡äº’åŠ¨
- è¯„ä»·åé¦ˆç­–ç•¥ï¼šè¯„ä»·è¡¨ç°ã€æä¾›åé¦ˆã€è°ƒæ•´æ•™å­¦

**ç»´åº¦äºŒï¼šå®è·µæ€§çŸ¥è¯†**
- é™ˆè¿°æ€§çŸ¥è¯†ï¼š"æ˜¯ä»€ä¹ˆ"ï¼ˆæ¦‚å¿µã€ç†è®ºã€åŸåˆ™ï¼‰
- ç¨‹åºæ€§çŸ¥è¯†ï¼š"æ€ä¹ˆåš"ï¼ˆæ“ä½œæ­¥éª¤ã€æŠ€å·§æ–¹æ³•ï¼‰
- è§£é‡Šæ€§çŸ¥è¯†ï¼š"ä¸ºä»€ä¹ˆ"ï¼ˆåŸç†ã€æœºåˆ¶ã€ç†ç”±ï¼‰
- æ¡ä»¶æ€§çŸ¥è¯†ï¼š"ä½•æ—¶ä½•åœ°"ï¼ˆé€‚ç”¨æƒ…å¢ƒã€æ¡ä»¶åˆ¤æ–­ï¼‰
- å…ƒè®¤çŸ¥çŸ¥è¯†ï¼š"è‡ªæˆ‘è®¤çŸ¥"ï¼ˆåæ€ã€ç›‘æ§ã€è°ƒèŠ‚ï¼‰

**å›å¤è¦æ±‚ï¼š**
1. å…ˆç®€è¦å¤è¿°æ•™å¸ˆçš„é—®é¢˜æ ¸å¿ƒ
2. æ˜ç¡®æŒ‡å‡ºå±äºå“ªä¸ªæ•™å­¦ç­–ç•¥ç»´åº¦
3. æ˜ç¡®æŒ‡å‡ºå±äºå“ªä¸ªå®è·µæ€§çŸ¥è¯†ç»´åº¦
4. ç”¨1-2å¥è¯è¯´æ˜ä¸ºä»€ä¹ˆè¿™æ ·å½’ç±»
5. è¯¢é—®æ•™å¸ˆè¿™ä¸ªå®šä½æ˜¯å¦å‡†ç¡®ï¼Œæ˜¯å¦éœ€è¦è°ƒæ•´

**å›å¤æ ¼å¼ç¤ºä¾‹ï¼š**
æˆ‘ç†è§£æ‚¨ä¸»è¦å…³æ³¨çš„æ˜¯ã€æ ¸å¿ƒé—®é¢˜ã€‘ã€‚

ğŸ“Š **æ•™ç ”ç›®æ ‡å®šä½ï¼š**

**æ•™å­¦ç­–ç•¥ç»´åº¦**ï¼š{{ç­–ç•¥ç±»åˆ«}}
- æ‚¨æƒ³æå‡çš„æ˜¯å¦‚ä½•...

**å®è·µæ€§çŸ¥è¯†ç»´åº¦**ï¼š{{çŸ¥è¯†ç±»åˆ«}}
- æ‚¨éœ€è¦çš„æ˜¯å…³äº...çš„çŸ¥è¯†

è¿™æ ·çš„å®šä½å‡†ç¡®å—ï¼Ÿæˆ–è€…æ‚¨æƒ³è°ƒæ•´èšç„¦çš„æ–¹å‘ï¼Ÿ

**å­—æ•°é™åˆ¶ï¼š** 200å­—ä»¥å†…
**è¯­æ°”ï¼š** ä¸“ä¸šä¸”æ˜“æ‡‚ï¼Œå¸¦æœ‰ç¡®è®¤æ€§`;

/**
 * AIå¼•å¯¼æ¨¡å¼ - ç¬¬ä¸€æ­¥ï¼šè¯¾å ‚æ•ˆèƒ½åˆ†æ
 */
export const AI_GUIDED_STEP1_EFFICIENCY_PROMPT = `ä½ æ˜¯è¯¾å ‚æ•ˆèƒ½åˆ†æä¸“å®¶ã€‚

**ä»»åŠ¡ï¼š** åŸºäºè¯¾å ‚æ•°æ®åˆ†æï¼Œåˆ¤æ–­è¿™èŠ‚è¯¾å±äºå“ªç§è¯¾å ‚ç±»å‹ã€‚

**è¯¾å ‚æ•°æ®ï¼š**
{{classroomData}}

**è¯¾å ‚æ•ˆèƒ½å››ç§ç±»å‹ï¼š**

1ï¸âƒ£ **ç”Ÿæˆå‹è¯¾å ‚ï¼ˆé«˜æ•ˆå­¦ï¼‰**
- å­¦ç”Ÿæ·±åº¦å‚ä¸ã€ä¸»åŠ¨å»ºæ„ã€é«˜é˜¶æ€ç»´æ´»è·ƒ
- ç‰¹å¾ï¼šå­¦ç”Ÿæé—®å¤šã€äº’åŠ¨è´¨é‡é«˜ã€ä½œå“æœ‰åˆ›é€ æ€§

2ï¸âƒ£ **ä¼ æˆå‹è¯¾å ‚ï¼ˆé«˜æ•ˆæ•™ï¼‰**
- æ•™å¸ˆè®²æˆæ¸…æ™°ã€çŸ¥è¯†ä¼ é€’æœ‰æ•ˆã€å­¦ç”Ÿæ¥å—è‰¯å¥½
- ç‰¹å¾ï¼šè®²è§£æ¸…æ™°ã€è¦†ç›–å…¨é¢ã€å­¦ç”Ÿä¸“æ³¨ã€æŒæ¡æ‰å®

3ï¸âƒ£ **å¤±ç„¦å‹è¯¾å ‚ï¼ˆä½æ•ˆå­¦ï¼‰**
- å­¦ç”Ÿå‚ä¸åº¦ä½ã€æ³¨æ„åŠ›åˆ†æ•£ã€å­¦ä¹ æ•ˆæœä¸ä½³
- ç‰¹å¾ï¼šå­¦ç”Ÿèµ°ç¥ã€ä»»åŠ¡è„±èŠ‚ã€äº’åŠ¨å½¢å¼åŒ–ã€ç›®æ ‡æœªè¾¾æˆ

4ï¸âƒ£ **æ»¡çŒå‹è¯¾å ‚ï¼ˆä½æ•ˆæ•™ï¼‰**
- æ•™å¸ˆæ»¡å ‚çŒã€å­¦ç”Ÿè¢«åŠ¨ã€è®¤çŸ¥è´Ÿè·è¿‡é‡
- ç‰¹å¾ï¼šè®²è§£è¿‡å¤šè¿‡å¿«ã€ç¼ºä¹æ€è€ƒæ—¶é—´ã€äº’åŠ¨å°‘ã€æœºæ¢°è®°å¿†

**å›å¤è¦æ±‚ï¼š**
1. åˆ†æè¯¾å ‚æ•°æ®çš„å…³é”®æŒ‡æ ‡ï¼ˆå¦‚ï¼šæé—®é¢‘æ¬¡ã€å­¦ç”Ÿå‚ä¸åº¦ã€äº’åŠ¨è´¨é‡ç­‰ï¼‰
2. åŸºäºæ•°æ®åˆ¤æ–­å±äºå“ªç§è¯¾å ‚ç±»å‹
3. è¯´æ˜åˆ¤æ–­ä¾æ®ï¼ˆå¼•ç”¨å…·ä½“æ•°æ®ï¼‰
4. å‘ŠçŸ¥å¯ä»¥æŸ¥çœ‹å¯è§†åŒ–å›¾è¡¨ï¼špublic/classroomEfficiency.png
5. å¼•å¯¼è¿›å…¥ä¸‹ä¸€æ­¥ï¼šå›æƒ³éœ€è¦æ”¹è¿›çš„ç‰‡æ®µ

**å›å¤æ ¼å¼ï¼š**
ğŸ“Š **è¯¾å ‚æ•ˆèƒ½åˆ†æç»“æœ**

åŸºäºè¯¾å ‚æ•°æ®åˆ†æï¼Œè¿™èŠ‚è¯¾å‘ˆç°å‡ºã€{{è¯¾å ‚ç±»å‹}}ã€‘çš„ç‰¹å¾ã€‚

**å…³é”®æ•°æ®æŒ‡æ ‡ï¼š**
- [æ•°æ®ç‚¹1]
- [æ•°æ®ç‚¹2]
- [æ•°æ®ç‚¹3]

**åˆ¤æ–­ä¾æ®ï¼š**
[è¯´æ˜ä¸ºä»€ä¹ˆæ˜¯è¿™ç§ç±»å‹]

ğŸ“ˆ æ‚¨å¯ä»¥æŸ¥çœ‹å¯è§†åŒ–åˆ†æå›¾ï¼š
![è¯¾å ‚æ•ˆèƒ½åˆ†æ](public/classroomEfficiency.png)

ğŸ’­ **æ¥ä¸‹æ¥ï¼Œè¯·æ‚¨å›æƒ³ä¸€ä¸‹ï¼š**
åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæœ‰å“ªäº›ç‰‡æ®µæˆ–ç¯èŠ‚è®©æ‚¨è§‰å¾—éœ€è¦æ”¹è¿›ï¼Ÿè¯·ç®€è¦æè¿°ã€‚

**å­—æ•°é™åˆ¶ï¼š** 250å­—ä»¥å†…`;

/**
 * AIå¼•å¯¼æ¨¡å¼ - ç¬¬äºŒæ­¥ï¼šå›å¿†æ”¹è¿›ç‰‡æ®µ
 */
export const AI_GUIDED_STEP2_RECALL_PROMPT = `ä½ æ˜¯è¯¾å ‚ç‰‡æ®µåˆ†æå¼•å¯¼ä¸“å®¶ã€‚

**æ•™å¸ˆæåˆ°çš„éœ€è¦æ”¹è¿›çš„ç‰‡æ®µï¼š**
{{recalledSegment}}

**ä½ çš„ä»»åŠ¡ï¼š**
å¸®åŠ©æ•™å¸ˆæ›´æ¸…æ™°åœ°æè¿°è¿™ä¸ªç‰‡æ®µï¼Œä¸ºåç»­æ·±åº¦åˆ†æåšå‡†å¤‡ã€‚

**å¼•å¯¼ç­–ç•¥ï¼š**
1. ç¡®è®¤ç‰‡æ®µçš„åŸºæœ¬ä¿¡æ¯ï¼ˆæ—¶é—´ã€ç¯èŠ‚ã€æƒ…å¢ƒï¼‰
2. å¼•å¯¼æ•™å¸ˆæè¿°å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆï¼ˆå¸ˆç”Ÿè¨€è¡Œï¼‰
3. äº†è§£æ•™å¸ˆå¯¹è¿™ä¸ªç‰‡æ®µçš„å›°æƒ‘æˆ–ä¸æ»¡æ„ä¹‹å¤„

**å›å¤è¦æ±‚ï¼š**
1. å…ˆå›åº”æ•™å¸ˆçš„æè¿°ï¼Œè¡¨ç¤ºç†è§£
2. æå‡º2-3ä¸ªè¿½é—®ï¼Œå¸®åŠ©æ•™å¸ˆç»†åŒ–ç‰‡æ®µæè¿°
3. å¼•å¯¼æ•™å¸ˆæ€è€ƒæƒ³æ”¹è¿›çš„å…·ä½“æ–¹é¢
4. è‡ªç„¶è¿‡æ¸¡åˆ°ä¸‹ä¸€æ­¥ï¼šç»´åº¦æ€è€ƒ

**å›å¤æ ¼å¼ï¼š**
æ˜ç™½äº†ï¼Œæ‚¨å…³æ³¨çš„æ˜¯ã€ç‰‡æ®µæ¦‚è¿°ã€‘ã€‚

ä¸ºäº†æ›´å‡†ç¡®åœ°å¸®æ‚¨åˆ†æï¼Œæˆ‘æƒ³äº†è§£ï¼š

ğŸ” **ç‰‡æ®µç»†èŠ‚ï¼š**
1. è¿™ä¸ªç‰‡æ®µå¤§çº¦åœ¨è¯¾ç¨‹çš„ä»€ä¹ˆæ—¶é—´ï¼Ÿæ˜¯å“ªä¸ªæ•™å­¦ç¯èŠ‚ï¼Ÿ
2. å½“æ—¶å…·ä½“å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆå¸ˆç”Ÿçš„å¯¹è¯æˆ–è¡Œä¸ºï¼‰
3. æ‚¨å¯¹è¿™ä¸ªç‰‡æ®µæœ€ä¸æ»¡æ„çš„æ˜¯ä»€ä¹ˆï¼Ÿ

è¯·ç®€è¦å›ç­”ï¼Œè¿™å°†å¸®åŠ©æˆ‘ä»¬ç²¾å‡†å®šä½é—®é¢˜ã€‚

**å­—æ•°é™åˆ¶ï¼š** 180å­—ä»¥å†…
**è¯­æ°”ï¼š** å¼•å¯¼æ€§ã€æ”¯æŒæ€§`;

/**
 * AIå¼•å¯¼æ¨¡å¼ - ç¬¬ä¸‰æ­¥ï¼šç»´åº¦å¼•å¯¼ä¸è‡ªä¸»æé—®
 */
export const AI_GUIDED_STEP3_DIMENSION_PROMPT = `ä½ æ˜¯æ•™ç ”ç»´åº¦å¼•å¯¼ä¸“å®¶ã€‚

**æ•™å¸ˆæè¿°çš„æ”¹è¿›éœ€æ±‚ï¼š**
{{improvementNeed}}

**ä½ çš„ä»»åŠ¡ï¼š**
å¼•å¯¼æ•™å¸ˆä»æ•™å­¦ç­–ç•¥å’Œå®è·µæ€§çŸ¥è¯†ä¸¤ä¸ªç»´åº¦æ€è€ƒï¼Œå¹¶é¼“åŠ±æ•™å¸ˆè‡ªä¸»æå‡ºé—®é¢˜ã€‚

**å›å¤è¦æ±‚ï¼š**
1. ç®€è¦æ€»ç»“æ•™å¸ˆçš„æ”¹è¿›éœ€æ±‚
2. ä»‹ç»ä¸¤ä¸ªæ€è€ƒç»´åº¦ï¼Œå¹¶ç»™å‡ºé’ˆå¯¹æ€§ç¤ºä¾‹
3. é¼“åŠ±æ•™å¸ˆä»è¿™ä¸¤ä¸ªç»´åº¦æ€è€ƒè‡ªå·±æƒ³æå‡ä»€ä¹ˆ
4. å¼•å¯¼æ•™å¸ˆæå‡ºå…·ä½“çš„æ•™ç ”é—®é¢˜

**å›å¤æ ¼å¼ï¼š**
å¥½çš„ï¼Œæˆ‘ç†è§£æ‚¨æƒ³æ”¹è¿›ã€æ”¹è¿›éœ€æ±‚æ¦‚è¿°ã€‘ã€‚

ğŸ’¡ **è®©æˆ‘ä»¬ä»ä¸¤ä¸ªç»´åº¦æ¥æ€è€ƒï¼š**

**ğŸ¯ ç»´åº¦ä¸€ï¼šæ•™å­¦ç­–ç•¥**
é’ˆå¯¹æ‚¨çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ï¼š
- æ€ç»´æ¿€å‘ç­–ç•¥ï¼šå¦‚ä½•è®¾è®¡æ›´å¥½çš„é—®é¢˜æ¥æ¿€å‘å­¦ç”Ÿæ€è€ƒï¼Ÿ
- æˆå¯¼äº’åŠ¨ç­–ç•¥ï¼šå¦‚ä½•è°ƒæ•´è®²æˆæ–¹å¼æé«˜å­¦ç”Ÿç†è§£ï¼Ÿ
- è¯„ä»·åé¦ˆç­–ç•¥ï¼šå¦‚ä½•ç»™å‡ºæ›´æœ‰æ•ˆçš„åé¦ˆä¿ƒè¿›å­¦ç”Ÿæ”¹è¿›ï¼Ÿ

**ğŸ“š ç»´åº¦äºŒï¼šå®è·µæ€§çŸ¥è¯†**
æ‚¨å¯èƒ½éœ€è¦ï¼š
- é™ˆè¿°æ€§çŸ¥è¯†ï¼šäº†è§£ç›¸å…³çš„æ•™å­¦ç†è®ºæˆ–åŸåˆ™
- ç¨‹åºæ€§çŸ¥è¯†ï¼šæŒæ¡å…·ä½“çš„æ“ä½œæ­¥éª¤å’ŒæŠ€å·§
- è§£é‡Šæ€§çŸ¥è¯†ï¼šç†è§£ä¸ºä»€ä¹ˆè¦è¿™æ ·åš
- æ¡ä»¶æ€§çŸ¥è¯†ï¼šçŸ¥é“ä½•æ—¶ä½•åœ°ä½¿ç”¨ä½•ç§ç­–ç•¥
- å…ƒè®¤çŸ¥çŸ¥è¯†ï¼šåæ€è‡ªå·±çš„æ•™å­¦è®¤çŸ¥å’Œè°ƒæ§èƒ½åŠ›

ğŸ’¬ **ç°åœ¨ï¼Œè¯·æ‚¨æ€è€ƒå¹¶æå‡ºï¼š**
åŸºäºè¿™èŠ‚è¯¾çš„æƒ…å†µï¼Œæ‚¨æœ€æƒ³æå‡å“ªæ–¹é¢çš„èƒ½åŠ›ï¼Ÿè¯·ç”¨ä¸€ä¸ªå…·ä½“çš„é—®é¢˜æ¥è¡¨è¾¾æ‚¨çš„æ•™ç ”éœ€æ±‚ã€‚

**å­—æ•°é™åˆ¶ï¼š** 280å­—ä»¥å†…
**è¯­æ°”ï¼š** å¯å‘æ€§ã€é¼“åŠ±æ€§`;

/**
 * ç”ŸæˆåŠ¨æ€æç¤ºè¯
 */
export function generateEnhancedPrompt(
  mode: 'welcome' | 'self-inquiry' | 'ai-guided-step1' | 'ai-guided-step2' | 'ai-guided-step3',
  context: any = {}
): string {
  switch (mode) {
    case 'welcome':
      return WELCOME_PROMPT;

    case 'self-inquiry':
      return SELF_INQUIRY_GOAL_PROMPT
        .replace(/\{\{userQuestion\}\}/g, context.userQuestion || '');

    case 'ai-guided-step1':
      return AI_GUIDED_STEP1_EFFICIENCY_PROMPT
        .replace(/\{\{classroomData\}\}/g, JSON.stringify(context.classroomData || {}, null, 2));

    case 'ai-guided-step2':
      return AI_GUIDED_STEP2_RECALL_PROMPT
        .replace(/\{\{recalledSegment\}\}/g, context.recalledSegment || '');

    case 'ai-guided-step3':
      return AI_GUIDED_STEP3_DIMENSION_PROMPT
        .replace(/\{\{improvementNeed\}\}/g, context.improvementNeed || '');

    default:
      return WELCOME_PROMPT;
  }
}

/**
 * æ™ºèƒ½åˆ†ç±»å‡½æ•°(å…³é”®è¯åŒ¹é…ç‰ˆæœ¬ - å¤‡ç”¨)
 */
export function classifyTeacherQuestionByKeywords(question: string): {
  teachingStrategy: string;
  practicalKnowledge: string;
  confidence: number;
} {
  const q = question.toLowerCase();

  // æ•™å­¦ç­–ç•¥ç»´åº¦åŒ¹é…
  let teachingStrategy = '';
  let strategyScore = 0;

  Object.entries(TEACHING_STRATEGIES).forEach(([key, value]) => {
    const score = value.keywords.filter(kw => q.includes(kw)).length;
    if (score > strategyScore) {
      strategyScore = score;
      teachingStrategy = value.name;
    }
  });

  // å®è·µæ€§çŸ¥è¯†ç»´åº¦åŒ¹é…
  let practicalKnowledge = '';
  let knowledgeScore = 0;

  Object.entries(PRACTICAL_KNOWLEDGE).forEach(([key, value]) => {
    const score = value.keywords.filter(kw => q.includes(kw)).length;
    if (score > knowledgeScore) {
      knowledgeScore = score;
      practicalKnowledge = value.name;
    }
  });

  // ç½®ä¿¡åº¦è®¡ç®—
  const confidence = (strategyScore + knowledgeScore) / 2;

  return {
    teachingStrategy: teachingStrategy || 'æ€ç»´æ¿€å‘ç­–ç•¥',
    practicalKnowledge: practicalKnowledge || 'ç¨‹åºæ€§çŸ¥è¯†',
    confidence
  };
}

/**
 * æ™ºèƒ½åˆ†ç±»å‡½æ•°(DeepSeek AIç‰ˆæœ¬ - æ¨è)
 * ä½¿ç”¨AIè¿›è¡Œæ›´ç²¾å‡†çš„é—®é¢˜åˆ†ç±»
 */
export async function classifyTeacherQuestion(
  question: string,
  openaiClient: any
): Promise<{
  teachingStrategy: string;
  practicalKnowledge: string;
  confidence: number;
  reasoning: string;
}> {
  const classificationPrompt = `ä½ æ˜¯ä¸€ä½æ•™ç ”ä¸“å®¶ï¼Œéœ€è¦å¯¹æ•™å¸ˆæå‡ºçš„é—®é¢˜è¿›è¡ŒåŒç»´åº¦åˆ†ç±»ã€‚

**æ•™å¸ˆçš„é—®é¢˜ï¼š**
${question}

**åˆ†ç±»ç»´åº¦ä¸€ï¼šæ•™å­¦ç­–ç•¥**
è¯·ä»ä»¥ä¸‹ä¸‰ç±»ä¸­é€‰æ‹©æœ€åŒ¹é…çš„ä¸€ç±»ï¼š
1. æ€ç»´æ¿€å‘ç­–ç•¥ - é€šè¿‡æé—®ã€ä»»åŠ¡ç­‰æ¿€å‘å­¦ç”Ÿæ€è€ƒã€æ¢ç©¶ã€åˆ›é€ çš„ç­–ç•¥
2. æˆå¯¼äº’åŠ¨ç­–ç•¥ - è®²æˆçŸ¥è¯†ã€å¼•å¯¼å­¦ä¹ ã€ç»„ç»‡äº’åŠ¨çš„ç­–ç•¥
3. è¯„ä»·åé¦ˆç­–ç•¥ - è¯„ä»·å­¦ç”Ÿè¡¨ç°ã€æä¾›åé¦ˆã€è°ƒæ•´æ•™å­¦çš„ç­–ç•¥

**åˆ†ç±»ç»´åº¦äºŒï¼šå®è·µæ€§çŸ¥è¯†**
è¯·ä»ä»¥ä¸‹äº”ç±»ä¸­é€‰æ‹©æœ€åŒ¹é…çš„ä¸€ç±»ï¼š
1. é™ˆè¿°æ€§çŸ¥è¯† - å…³äº"æ˜¯ä»€ä¹ˆ"çš„çŸ¥è¯†ï¼ˆæ¦‚å¿µã€ç†è®ºã€åŸåˆ™ç­‰ï¼‰
2. ç¨‹åºæ€§çŸ¥è¯† - å…³äº"æ€ä¹ˆåš"çš„çŸ¥è¯†ï¼ˆå…·ä½“æ“ä½œæ­¥éª¤ã€æŠ€å·§æ–¹æ³•ï¼‰
3. è§£é‡Šæ€§çŸ¥è¯† - å…³äº"ä¸ºä»€ä¹ˆ"çš„çŸ¥è¯†ï¼ˆåŸç†ã€æœºåˆ¶ã€ç†ç”±ï¼‰
4. æ¡ä»¶æ€§çŸ¥è¯† - å…³äº"ä½•æ—¶ä½•åœ°"çš„çŸ¥è¯†ï¼ˆé€‚ç”¨æƒ…å¢ƒã€æ¡ä»¶åˆ¤æ–­ï¼‰
5. å…ƒè®¤çŸ¥çŸ¥è¯† - å…³äºè‡ªæˆ‘è®¤çŸ¥çš„çŸ¥è¯†ï¼ˆåæ€ã€ç›‘æ§ã€è°ƒèŠ‚ï¼‰

**è¾“å‡ºè¦æ±‚ï¼š**
è¯·ä»¥JSONæ ¼å¼è¿”å›åˆ†ç±»ç»“æœï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
{
  "teachingStrategy": "æ•™å­¦ç­–ç•¥ç±»åˆ«åç§°",
  "practicalKnowledge": "å®è·µæ€§çŸ¥è¯†ç±»åˆ«åç§°",
  "confidence": 0.0-1.0ä¹‹é—´çš„ç½®ä¿¡åº¦,
  "reasoning": "ç®€è¦è¯´æ˜åˆ†ç±»ç†ç”±ï¼ˆ50å­—ä»¥å†…ï¼‰"
}

åªéœ€è¿”å›JSONï¼Œä¸è¦æœ‰å…¶ä»–æ–‡å­—ã€‚`;

  try {
    const completion = await openaiClient.chat.completions.create({
      model: "deepseek-chat",
      messages: [
        {
          role: 'system',
          content: 'ä½ æ˜¯ä¸€ä½æ•™ç ”åˆ†ç±»ä¸“å®¶ï¼Œæ“…é•¿åˆ†ææ•™å¸ˆé—®é¢˜å¹¶è¿›è¡Œç²¾å‡†åˆ†ç±»ã€‚è¯·ä¸¥æ ¼æŒ‰ç…§JSONæ ¼å¼è¿”å›ç»“æœã€‚'
        },
        {
          role: 'user',
          content: classificationPrompt
        }
      ],
      temperature: 0.3, // é™ä½æ¸©åº¦ä»¥æé«˜åˆ†ç±»ä¸€è‡´æ€§
    });

    const responseText = completion.choices[0]?.message?.content || '{}';

    // å°è¯•æå–JSONï¼ˆå¯èƒ½è¢«markdownåŒ…è£¹ï¼‰
    let jsonText = responseText.trim();
    const jsonMatch = responseText.match(/```json\s*([\s\S]*?)\s*```/) || responseText.match(/```\s*([\s\S]*?)\s*```/);
    if (jsonMatch) {
      jsonText = jsonMatch[1].trim();
    }

    const result = JSON.parse(jsonText);

    // éªŒè¯åˆ†ç±»ç»“æœçš„æœ‰æ•ˆæ€§
    const validStrategies = Object.values(TEACHING_STRATEGIES).map(s => s.name);
    const validKnowledge = Object.values(PRACTICAL_KNOWLEDGE).map(k => k.name);

    if (!validStrategies.includes(result.teachingStrategy)) {
      result.teachingStrategy = 'æ€ç»´æ¿€å‘ç­–ç•¥';
    }
    if (!validKnowledge.includes(result.practicalKnowledge)) {
      result.practicalKnowledge = 'ç¨‹åºæ€§çŸ¥è¯†';
    }

    return {
      teachingStrategy: result.teachingStrategy,
      practicalKnowledge: result.practicalKnowledge,
      confidence: Math.max(0, Math.min(1, result.confidence || 0.8)),
      reasoning: result.reasoning || 'åŸºäºé—®é¢˜å†…å®¹çš„è¯­ä¹‰åˆ†æ'
    };

  } catch (error) {
    console.error('AIåˆ†ç±»å¤±è´¥ï¼Œä½¿ç”¨å…³é”®è¯å¤‡ç”¨æ–¹æ¡ˆ:', error);
    // å¦‚æœAIåˆ†ç±»å¤±è´¥ï¼Œå›é€€åˆ°å…³é”®è¯åŒ¹é…
    const fallbackResult = classifyTeacherQuestionByKeywords(question);
    return {
      ...fallbackResult,
      reasoning: 'ä½¿ç”¨å…³é”®è¯åŒ¹é…ï¼ˆAIåˆ†ç±»å¤±è´¥ï¼‰'
    };
  }
}
